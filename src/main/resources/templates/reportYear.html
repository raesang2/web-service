<!DOCTYPE html>
<html lang="ko">
<head>
    <th:block th:replace="~{common.html}"></th:block>
    <meta property="og:type" content="website">
    <meta property="og:title" content="ì—°ë„ë³„ ì´ë¦„ ì¸ê¸° ìˆœìœ„ Top50">
    <meta property="og:description" content="ì—°ë„ë³„ ì´ë¦„ ì¸ê¸° ìˆœìœ„ Top50 í•œë²ˆì— í™•ì¸í•´ë³´ì„¸ìš”">
    <meta property="og:url" content="https://kkidsname.com/report">
    <title>ì—°ë„ë³„ ì´ë¦„ ì¸ê¸° ìˆœìœ„ Top50</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // í† ê¸€ ì„¹ì…˜ ê¸°ëŠ¥
            const toggles = document.querySelectorAll(".toggle-section");

            toggles.forEach(function (toggle) {
                toggle.addEventListener("click", function () {
                    const content = toggle.nextElementSibling;
                    const icon = toggle.querySelector(".toggle-icon");

                    content.classList.toggle("active");

                    // ì•„ì´ì½˜ ë°©í–¥ í† ê¸€
                    if (content.classList.contains("active")) {
                        icon.textContent = "â–¼";
                    } else {
                        icon.textContent = "â–²";
                    }
                });
            });

            // ì—°ë„ ì„ íƒ ì‹œ /report/{year} ë¡œ ì´ë™
            const yearSelect = document.getElementById("year");
            if (yearSelect) {
                yearSelect.addEventListener("change", function () {
                    const selectedYear = this.value;
                    
                    // ë¡œë”© ë°” í‘œì‹œ
                    document.getElementById("loadingBar").style.display = "flex";
                    
                    // í˜ì´ì§€ ì´ë™
                    window.location.href = `/report/${selectedYear}`;
                });
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <div th:replace="~{nav.html}"></div>
        <form id="searchForm">
            <div class="report-form-group">
                <label for="searchYear">ì—°ë„ ì„ íƒ</label>
                <select id="year" name="year" class="searchYear" required>
                    <option th:each="year : ${yearList}" th:value="${year}" th:text="${year}" th:selected="${year.toString() == selectYear}"></option>
                </select>
            </div>
        </form>
        <br>
		<div th:replace="~{titlebar.html :: title-bar(centerClass='search-title', titleText=${year + 'ë…„ ì´ë¦„ ì¸ê¸° ìˆœìœ„ Top50'})}"></div>
		<div th:replace="~{notice.html}"></div>
        <br>
        <div class="report-summary">
            ì„±ë³„ í†µí•© ê°€ì¥ ì¸ê¸° ìˆëŠ” ì´ë¦„ì€ <strong th:text="${tResults[0].targetName}"></strong> ì…ë‹ˆë‹¤.<br>
            ì„±ë¹„ëŠ”
            <span class="mfratio" th:text="'ğŸ¤´ ' + (${tResults[0].mRate} < 10 ? '&nbsp;&nbsp;' : (${tResults[0].mRate} < 100 ? '&nbsp;' : '')) + ${tResults[0].mRate} + '%' +
                ' ğŸ‘¸ ' + (${tResults[0].fRate} < 10 ? '&nbsp;&nbsp;' : (${tResults[0].fRate} < 100 ? '&nbsp;' : '')) + ${tResults[0].fRate} + '%'"></span> ì…ë‹ˆë‹¤.<br>
            ê°€ì¥ ì¸ê¸° ìˆëŠ” ë‚¨ì ğŸ¤´ ì´ë¦„ì€ <strong th:text="${mResults[0].targetName}"></strong> ì…ë‹ˆë‹¤.<br>
            ê°€ì¥ ì¸ê¸° ìˆëŠ” ì—¬ì ğŸ‘¸ ì´ë¦„ì€ <strong th:text="${fResults[0].targetName}"></strong> ì…ë‹ˆë‹¤.<br><br>
            <span th:text="${year + 'ë…„ ì´ë¦„ ì¸ê¸° ìˆœìœ„ Top50 ì „ì²´ í™•ì¸í•´ë³´ì„¸ìš”.'}"></span>
        </div>
        <div id="report-result-table">
            <h3 class="toggle-section">
                ì„±ë³„í†µí•© ìˆœìœ„ <span class="toggle-icon">â–¼</span>
            </h3>
            <div class="section-content active">
                <table id="t-table" class="result-table">
                    <thead>
                        <tr>
                            <th>ìˆœìœ„</th>
                            <th>ì´ë¦„</th>
                            <th>ê±´ìˆ˜</th>
                            <th>ì„±ë¹„(%)</th>
                        </tr>
                    </thead>
                    <tbody id="t-tboby">
                        <tr th:each="stat : ${tResults}">
                            <td th:text="${stat.targetRank}"></td>
                            <td th:text="${stat.targetName}"></td>
                            <td th:text="${#numbers.formatInteger(stat.targetCount, 1, 'COMMA')}"></td>
                            <td><span class="mfratio"
                                th:text="'ğŸ¤´ ' + (${stat.mRate} < 10 ? '&nbsp;&nbsp;' : (${stat.mRate} < 100 ? '&nbsp;' : '')) + ${stat.mRate} + '%' +
                                 ' ğŸ‘¸ ' + (${stat.fRate} < 10 ? '&nbsp;&nbsp;' : (${stat.fRate} < 100 ? '&nbsp;' : '')) + ${stat.fRate} + '%'">
                            </span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 class="toggle-section">
                ë‚¨ì ì´ë¦„ ìˆœìœ„ <span class="toggle-icon">â–¼</span>
            </h3>
            <div class="section-content active">
                <table id="m-table" class="result-table">
                    <thead>
                        <tr>
                            <th>ìˆœìœ„</th>
                            <th>ì´ë¦„</th>
                            <th>ê±´ìˆ˜</th>
                        </tr>
                    </thead>
                    <tbody id="m-tboby">
                        <tr th:each="stat : ${mResults}">
                            <td th:text="${stat.targetRank}"></td>
                            <td th:text="${stat.targetName}"></td>
                            <td th:text="${#numbers.formatInteger(stat.targetCount, 1, 'COMMA')}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 class="toggle-section">
                ì—¬ì ì´ë¦„ ìˆœìœ„ <span class="toggle-icon">â–¼</span>
            </h3>
            <div class="section-content active">
                <table id="f-table" class="result-table">
                    <thead>
                        <tr>
                            <th>ìˆœìœ„</th>
                            <th>ì´ë¦„</th>
                            <th>ê±´ìˆ˜</th>
                        </tr>
                    </thead>
                    <tbody id="f-tboby">
                        <tr th:each="stat : ${fResults}">
                            <td th:text="${stat.targetRank}"></td>
                            <td th:text="${stat.targetName}"></td>
                            <td th:text="${#numbers.formatInteger(stat.targetCount, 1, 'COMMA')}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- ë¡œë”©ë°” -->
    <div id="loadingBar">
        <div></div>
    </div>
</body>
</html>
